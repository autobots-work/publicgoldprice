<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Public Gold Silver Price Today - 24 Hours Price Tracker</title>
  <meta name="description" content="Check current Public Gold silver price today. Live silver price tracker based on Public Gold Official SAP 999 rates. Updated every 3 minutes and recorded daily.">
  <meta name="keywords" content="public gold silver price, silver price public gold, harga perak public gold, public gold silver today, harga perak sekarang">
  <meta name="robots" content="index,follow">
  <link rel="icon" type="image/png" href="/PublicGoldPriceIcon.png">
  <meta name="theme-color" content="#0a0a0f">
  <link rel="canonical" href="https://publicgoldprice.com/silver.html">
  <link rel="alternate" hreflang="ms" href="https://publicgoldprice.com/ms/silver.html">
  <link rel="alternate" hreflang="en" href="https://publicgoldprice.com/silver.html">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://publicgoldprice.com/silver.html">
  <meta property="og:title" content="Public Gold Silver Price Today - 24 Hours Price Tracker">
  <meta property="og:description" content="Check current Public Gold silver price today. Live silver price tracker based on Public Gold Official SAP 999 rates. Updated every 3 minutes.">
  <meta property="og:site_name" content="PublicGoldPrice.com">
  <meta property="og:image" content="https://publicgoldprice.com/PublicGoldPrice-Featured-Image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Public Gold Price Tracker - PublicGoldPrice.com">
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Dataset","name":"Public Gold Silver Price Today - 24 Hours Price Tracker","description":"Live silver price data from Public Gold Malaysia SAP 999 program, updated every 3 minutes.","url":"https://publicgoldprice.com/silver.html","publisher":{"@type":"Organization","name":"PublicGoldPrice.com","url":"https://publicgoldprice.com"},"license":"https://creativecommons.org/licenses/by/4.0/","creator":{"@type":"Organization","name":"PublicGoldPrice.com","url":"https://publicgoldprice.com"},"inLanguage":"en"}
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5267120092715349" crossorigin="anonymous"></script>
  <style>
    :root{--bg:#0a0a0f;--surface:#13131c;--surface2:#1c1c2a;--border:#2a2a3d;--border2:#3a3a55;--white:#f0f2ff;--muted:#6b6b8a;--muted2:#9494b8;--accent:#c8cdd6;--up:#3dd68c;--up-bg:rgba(61,214,140,0.12);--down:#ff5f5f;--down-bg:rgba(255,95,95,0.12);--flat-bg:rgba(255,255,255,0.06);}
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'JetBrains Mono',monospace;background:var(--bg);color:var(--white);min-height:100vh;}
    .topbar{position:sticky;top:0;z-index:100;background:rgba(10,10,15,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 1.5rem;height:56px;display:flex;align-items:center;justify-content:space-between;}
    .topbar-logo{font-family:'Outfit',sans-serif;font-weight:800;font-size:1.3rem;letter-spacing:-0.3px;}
    .topbar-logo span{color:#e2b96f;}
    .topbar-right{display:flex;align-items:center;gap:0.5rem;}
    .topbar-nav{display:flex;align-items:center;gap:0.25rem;}
    .nav-tab{font-family:'Outfit',sans-serif;font-size:0.72rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;text-decoration:none;padding:6px 14px;border-radius:20px;border:1px solid transparent;transition:all 0.2s;}
    .nav-tab.active{background:rgba(200,205,214,0.12);color:var(--accent);border-color:rgba(200,205,214,0.3);}
    .nav-tab.inactive{color:var(--muted2);border-color:var(--border);}
    .nav-tab.inactive:hover{color:var(--white);border-color:var(--border2);}
    .lang-switch{font-family:'Outfit',sans-serif;font-size:0.65rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;text-decoration:none;padding:5px 10px;border-radius:20px;border:1px solid var(--border2);color:var(--muted2);transition:all 0.2s;}
    .lang-switch:hover{color:var(--white);border-color:var(--accent);}
    .live-badge{display:flex;align-items:center;gap:5px;background:var(--up-bg);border:1px solid rgba(61,214,140,0.25);color:var(--up);font-size:0.65rem;font-weight:500;letter-spacing:1.5px;text-transform:uppercase;padding:4px 10px;border-radius:20px;}
    .live-dot{width:6px;height:6px;border-radius:50%;background:var(--up);animation:blink 1.4s ease-in-out infinite;}
    @keyframes blink{0%,100%{opacity:1;}50%{opacity:0.2;}}
    main{max-width:860px;margin:0 auto;padding:2rem 1.5rem 5rem;}
    .seo-h1{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;}
    .hero{background:var(--surface);border:1px solid var(--border2);border-radius:16px;padding:2rem;margin-bottom:2rem;position:relative;overflow:hidden;animation:fadeUp 0.4s ease both;}
    .hero::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--border2) 30%,#6060cc 60%,transparent);}
    .hero-top{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem;margin-bottom:1.5rem;}
    .hero-date{font-family:'Outfit',sans-serif;font-size:1.2rem;font-weight:700;color:var(--accent);letter-spacing:0.3px;margin-bottom:0.3rem;}
    .hero-label{font-size:0.68rem;text-transform:uppercase;letter-spacing:2px;color:var(--muted2);margin-bottom:0.5rem;}
    .hero-price-wrap{display:flex;align-items:baseline;gap:0.35rem;}
    .hero-currency{font-family:'Outfit',sans-serif;font-size:1.6rem;font-weight:600;color:var(--muted2);}
    .hero-price{font-family:'Outfit',sans-serif;font-size:4rem;font-weight:800;color:var(--white);line-height:1;letter-spacing:-2px;}
    .hero-unit{font-size:0.85rem;color:var(--muted);}
    .hero-change-wrap{text-align:right;}
    .hero-change{font-family:'Outfit',sans-serif;font-size:2.5rem;font-weight:700;}
    .hero-change.up{color:var(--up);} .hero-change.down{color:var(--down);} .hero-change.flat{color:var(--muted2);}
    .hero-change-sub{font-size:0.68rem;margin-top:4px;letter-spacing:0.5px;}
    .hero-stats{display:flex;border-top:1px solid var(--border);padding-top:1.25rem;flex-wrap:wrap;gap:0.5rem 0;}
    .stat{flex:1;min-width:80px;padding-right:1rem;}
    .stat+.stat{padding-left:1rem;border-left:1px solid var(--border);}
    .stat-label{font-size:0.6rem;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:5px;}
    .stat-val{font-family:'Outfit',sans-serif;font-size:1.8rem;font-weight:700;color:var(--white);}
    .stat-val.up{color:var(--up);} .stat-val.down{color:var(--down);}
    .date-section{margin-bottom:1.5rem;animation:fadeUp 0.4s ease both;}
    @keyframes fadeUp{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}
    .date-row{display:flex;align-items:center;gap:0.75rem;margin-bottom:0.75rem;}
    .date-pill{font-family:'Outfit',sans-serif;font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;padding:4px 12px;border-radius:20px;white-space:nowrap;}
    .date-pill.today{background:rgba(200,205,214,0.12);color:var(--accent);border:1px solid rgba(200,205,214,0.3);}
    .date-pill.past{background:var(--surface2);color:var(--muted2);border:1px solid var(--border);}
    .date-line{flex:1;height:1px;background:var(--border);}
    .date-full{font-size:0.65rem;color:var(--muted);white-space:nowrap;}
    .table-wrap{background:var(--surface);border:1px solid var(--border);border-radius:12px;overflow:hidden;}
    table{width:100%;border-collapse:collapse;}
    thead tr{background:var(--surface2);border-bottom:1px solid var(--border2);}
    th{padding:10px 16px;text-align:left;font-size:0.6rem;text-transform:uppercase;letter-spacing:1.8px;color:var(--muted2);font-weight:400;}
    th.right{text-align:right;}
    td{padding:14px 16px;border-top:1px solid var(--border);vertical-align:middle;}
    tbody tr:hover td{background:rgba(255,255,255,0.02);}
    .td-time{color:var(--muted2);font-size:0.82rem;white-space:nowrap;}
    .td-price{font-family:'Outfit',sans-serif;font-weight:700;font-size:1.05rem;color:var(--white);white-space:nowrap;}
    .td-change{text-align:right;}
    .badge{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:8px;font-size:0.72rem;font-weight:500;white-space:nowrap;flex-wrap:wrap;justify-content:flex-end;}
    .badge.up{background:var(--up-bg);color:var(--up);} .badge.down{background:var(--down-bg);color:var(--down);} .badge.flat{background:var(--flat-bg);color:var(--muted2);}
    .badge-pct{font-size:0.65rem;opacity:0.8;}
    .expand-row td{text-align:center;padding:10px;}
    .expand-btn{font-family:'Outfit',sans-serif;font-size:0.7rem;font-weight:700;color:var(--muted2);background:none;border:1px solid var(--border2);border-radius:20px;padding:5px 16px;cursor:pointer;transition:all 0.2s;letter-spacing:0.5px;}
    .expand-btn:hover{color:var(--white);border-color:var(--accent);}
    .teaser-card{background:var(--surface);border:1px solid var(--border2);border-radius:12px;padding:1.5rem;margin:2rem 0;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;position:relative;overflow:hidden;}
    .teaser-card::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(255,255,255,0.01) 10px,rgba(255,255,255,0.01) 20px);}
    .teaser-badge{font-family:'Outfit',sans-serif;font-size:0.6rem;font-weight:800;letter-spacing:2px;text-transform:uppercase;background:rgba(200,205,214,0.12);color:var(--accent);border:1px solid rgba(200,205,214,0.3);padding:3px 10px;border-radius:20px;margin-bottom:0.5rem;display:inline-block;}
    .teaser-title{font-family:'Outfit',sans-serif;font-size:1rem;font-weight:800;color:var(--white);margin-bottom:0.3rem;}
    .teaser-body{font-size:0.75rem;color:var(--muted2);line-height:1.6;}
    .teaser-btn{font-family:'Outfit',sans-serif;font-size:0.8rem;font-weight:700;color:var(--muted2);background:none;border:1px solid var(--border2);border-radius:8px;padding:10px 20px;cursor:not-allowed;letter-spacing:0.5px;white-space:nowrap;opacity:0.6;}
    .seo-section{margin-bottom:2rem;}
    .seo-h2{font-family:'Outfit',sans-serif;font-size:1.1rem;font-weight:800;color:var(--white);margin-bottom:0.75rem;letter-spacing:-0.3px;}
    .seo-p{font-size:0.82rem;color:var(--muted2);line-height:1.8;margin-bottom:0.5rem;}
    .seo-p strong{color:var(--white);font-weight:700;}
    .seo-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:1.25rem 1.5rem;margin-bottom:2rem;}
    .seo-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.25rem;flex-wrap:wrap;gap:0.5rem;}
    .seo-card-title{font-family:'Outfit',sans-serif;font-size:0.75rem;font-weight:800;text-transform:uppercase;letter-spacing:1.5px;color:var(--accent);}
    .seo-card-date{font-size:0.65rem;color:var(--muted);}
    .seo-card-stats{display:flex;flex-wrap:wrap;gap:0.5rem 0;border-top:1px solid var(--border);padding-top:1rem;}
    .seo-stat{flex:1;min-width:80px;padding-right:1rem;}
    .seo-stat+.seo-stat{padding-left:1rem;border-left:1px solid var(--border);}
    .seo-stat-label{font-size:0.6rem;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin-bottom:5px;}
    .seo-stat-val{font-family:'Outfit',sans-serif;font-size:1.3rem;font-weight:700;color:var(--white);}
    .seo-stat-val.up{color:var(--up);} .seo-stat-val.down{color:var(--down);}
    footer{text-align:center;font-size:0.65rem;color:var(--muted);letter-spacing:1px;padding-top:1.5rem;border-top:1px solid var(--border);margin-top:3rem;}
    .empty{text-align:center;padding:4rem;color:var(--muted);font-size:0.85rem;}
    @media(max-width:600px){
      .topbar{padding:0 1rem;} main{padding:1.25rem 1rem 4rem;}
      .hero{padding:1.25rem;border-radius:12px;margin-bottom:1.5rem;}
      .hero-price{font-size:2.65rem;letter-spacing:-1.5px;} .hero-currency{font-size:1.2rem;} .hero-change{font-size:1.2rem;}
      .hero-date{font-size:0.85rem;}
      th,td{padding:12px 12px;} .td-price{font-size:0.95rem;}
      .stat-val{font-size:0.88rem;} .stat{min-width:70px;} .date-full{display:none;}
      .cta-box{flex-direction:column;align-items:stretch;} .cta-box a{width:100%;justify-content:center;}
      .nav-tab{padding:5px 10px;font-size:0.65rem;} .lang-switch{padding:5px 8px;font-size:0.6rem;}
      .seo-stat-val{font-size:1rem;} .seo-h2{font-size:0.95rem;}
      .teaser-card{flex-direction:column;} .teaser-btn{width:100%;text-align:center;}
    }
  </style>
</head>
<body>
<h1 class="seo-h1">Public Gold Silver Price Today - 24 Hours Price Tracker</h1>
<div class="topbar">
  <div class="topbar-logo">Public<span>Gold</span>Price</div>
  <div class="topbar-right">
    <div class="topbar-nav">
      <a class="nav-tab inactive" href="/">Gold</a>
      <a class="nav-tab active" href="/silver.html">Silver</a>
    </div>
    <a class="lang-switch" href="/ms/silver.html">BM</a>
  </div>
</div>
<main>
  <div id="content"><div class="empty">Loadingâ€¦</div></div>

  <!-- Static sections S4, S5, S6 + CTA â€” always in DOM for SEO -->
  <div id="static-sections" style="margin-top:2.5rem">
    <div class="teaser-card" style="margin-top:0">
      <div>
        <div class="teaser-badge">Coming Soon</div>
        <div class="teaser-title">ðŸ“Š Full Price History â€” Coming Soon</div>
        <div class="teaser-body">Access complete 30, 90 &amp; 180-day price records. Perfect for investors who want to study long-term gold price movements.</div>
      </div>
      <button class="teaser-btn" disabled>Notify Me</button>
    </div>
    <p class="seo-p" style="margin-bottom:2rem">The silver price displayed here reflects the latest Public Gold SAP 999 rate for today. Prices may change throughout the day in line with global silver market movements. Every price change is recorded by PublicGoldPrice.com for your reference.</p>
    <div class="cta-box" style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;margin-bottom:2.5rem;padding:1.25rem 1.5rem;background:var(--surface);border:1px solid var(--border2);border-radius:12px;">
      <div style="flex:1;min-width:200px">
        <p style="font-family:'Outfit',sans-serif;font-size:0.95rem;font-weight:700;color:var(--white);line-height:1.4;margin-bottom:0.3rem">Not a Public Gold member yet? Start investing in Gold &amp; Silver from as low as RM100 a month!</p>
        <p style="font-size:0.7rem;color:var(--muted2);letter-spacing:0.3px">Free Registration, 100% Shariah Compliant</p>
      </div>
      <a href="https://publicgold.com.my/index.php?route=account/register&is_dealer=1&intro_pgcode=PG00258585" target="_blank" rel="noopener" style="text-decoration:none;white-space:nowrap;display:inline-flex;align-items:center;gap:8px;font-family:'Outfit',sans-serif;font-weight:800;font-size:0.85rem;letter-spacing:0.5px;padding:12px 24px;border-radius:10px;background:linear-gradient(135deg,#8a9099,#c8cdd6,#8a9099);background-size:200% auto;color:#0a0a0f;box-shadow:0 4px 20px rgba(200,205,214,0.3);transition:all 0.3s" onmouseover="this.style.backgroundPosition='right center';this.style.boxShadow='0 6px 28px rgba(200,205,214,0.5)'" onmouseout="this.style.backgroundPosition='left center';this.style.boxShadow='0 4px 20px rgba(200,205,214,0.3)'">
        Register For Free &nbsp;â†’
      </a>
    </div>
    <div class="seo-section">
      <h2 class="seo-h2">What is Public Gold SAP 999?</h2>
      <p class="seo-p">Public Gold SAP 999, or the Silver Accumulation Program, is a Shariah-compliant silver investment program offered by Public Gold Malaysia. It allows investors to purchase and accumulate 999 pure silver gradually, starting from a small amount. The SAP 999 silver price is updated in line with global silver market movements and may change at any time. PublicGoldPrice.com records every price change for your reference.</p>
    </div>
    <div class="seo-section">
      <h2 class="seo-h2">Public Gold SAP 999 â€” 100% Shariah Compliant</h2>
      <p class="seo-p">Public Gold Malaysia is the world's first gold and silver trading company to receive official Shariah-compliant certification, including for its SAP 999 program. The certification was issued by <strong>Amanie Advisors Sdn. Bhd.</strong>, an internationally recognised Shariah advisory firm. This means every transaction â€” outright purchase, easy payment plan (EPP), buyback, and accumulation program â€” conducted through Public Gold is halal and fully compliant with Islamic Shariah law. Invest with complete confidence and peace of mind.</p>
      <p class="seo-p" style="margin-top:0.75rem">For more information about Public Gold, visit â€” <a href="https://publicgold.com.my/index.php?route=information/information&information_id=46" target="_blank" rel="noopener" style="color:#c8cdd6;text-decoration:none;border-bottom:1px solid rgba(200,205,214,0.4)">Public Gold FAQ</a></p>
    </div>
    <div class="seo-section">
      <h2 class="seo-h2">About PublicGoldPrice.com</h2>
      <p class="seo-p">PublicGoldPrice.com is a live gold and silver price tracker for Public Gold Malaysia, built by an authorised Public Gold dealer. This website displays the latest Public Gold GAP 24K and SAP 999 prices, updated every 3 minutes, along with daily price records for your reference.</p>
      <p class="seo-p" style="margin-top:0.6rem">This website is useful for:</p>
      <ul style="margin:0.5rem 0 0 1.25rem;display:flex;flex-direction:column;gap:0.4rem">
        <li class="seo-p" style="margin-bottom:0">Public Gold members who want to monitor gold and silver price movements daily</li>
        <li class="seo-p" style="margin-bottom:0">Investors looking to identify the best time to buy or add to their gold and silver savings</li>
        <li class="seo-p" style="margin-bottom:0">The general public who want to check the current Public Gold gold and silver price without logging into their account</li>
      </ul>
    </div>
  </div>

  <div style="padding:1.25rem 1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:12px;margin-bottom:1.5rem">
    <p style="font-size:0.72rem;color:var(--muted2);line-height:1.7">The Silver data and prices displayed on this website are based on the latest official prices from Public Gold Malaysia under the SILVER Accumulation Program (999). Prices are subject to change without prior notice.</p>
  </div>
  <footer>publicgoldprice.com Â· Silver Price (RM/100 g) Â· Refreshes every 3 min Â· Updated: <span id="last-updated">â€”</span><br><br>Disclaimer: PublicGoldPrice.com is a website initiated by a Public Gold dealer and is not the official website of Public Gold Marketing Sdn. Bhd.</footer>
</main>

<script>
  const SHEET_ID   = '1nct9s5DQAzU1ql7h3p3Or8YPUZFRuYdnjawcYkKmojM';
  const SHEET_GID  = '36921757';
  const REFRESH_MS = 180_000;
  const MAX_DAYS   = 7;
  const PREVIEW_ROWS = 3;

  let countdown = REFRESH_MS / 1000;
  setInterval(() => {
    countdown--;
    if (countdown <= 0) countdown = REFRESH_MS / 1000;
    const el = document.getElementById('countdown-txt');
    if (el) el.textContent = 'Refresh in ' + countdown + 's';
  }, 1000);

  function parseGDate(val) {
    if (!val) return null;
    const s = String(val);
    const gd = s.match(/Date\((\d+),(\d+),(\d+)\)/);
    if (gd) return new Date(+gd[1], +gd[2], +gd[3]);
    const dmy = s.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);
    if (dmy) return new Date(+dmy[3], +dmy[2]-1, +dmy[1]);
    const iso = new Date(s);
    return isNaN(iso) ? null : iso;
  }

  function isToday(d) {
    const n = new Date();
    return d.getFullYear()===n.getFullYear() && d.getMonth()===n.getMonth() && d.getDate()===n.getDate();
  }

  function fmtDate(d) { return d.toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long',year:'numeric'}); }
  function fmtShort(d) { return d.toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'}); }
  function fmtTime(t) {
    if (!t) return 'â€”';
    const [h,m] = t.split(':').map(Number);
    if (isNaN(h)) return t;
    return (h%12||12)+':'+String(m).padStart(2,'0')+(h>=12?' PM':' AM');
  }
  function fmtPrice(p) { return p.toLocaleString('en-MY',{minimumFractionDigits:0,maximumFractionDigits:0}); }

  function parseCSV(text) {
    return text.trim().split('\n').slice(1).map(line => {
      const cols=[]; let cur='', inQ=false;
      for (const ch of line) {
        if (ch==='"') inQ=!inQ;
        else if (ch===',' && !inQ) {cols.push(cur.trim());cur='';}
        else cur+=ch;
      }
      cols.push(cur.trim()); return cols;
    });
  }

  async function fetchData() {
    const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${SHEET_GID}`;
    const text = await (await fetch(url)).text();
    return parseCSV(text)
      .filter(r=>r[0])
      .map(r=>({date:parseGDate(r[0]),time:r[1]??'',price:parseFloat(r[2])}))
      .filter(r=>r.date&&!isNaN(r.price))
      .sort((a,b)=>b.date-a.date||b.time.localeCompare(a.time));
  }

  function badge(curr, prev) {
    if (prev==null) return '<span class="badge flat">â€”</span>';
    const diff=curr-prev, pct=((diff/prev)*100).toFixed(2);
    if (diff>0) return `<span class="badge up">â–² RM ${fmtPrice(diff)} <span class="badge-pct">+${pct}%</span></span>`;
    if (diff<0) return `<span class="badge down">â–¼ RM ${fmtPrice(Math.abs(diff))} <span class="badge-pct">${pct}%</span></span>`;
    return '<span class="badge flat">No change</span>';
  }

  function groupByDate(records) {
    const map={};
    records.forEach(r=>{
      const k=r.date.toDateString();
      if(!map[k]) map[k]={date:r.date,entries:[]};
      map[k].entries.push(r);
    });
    return Object.values(map).sort((a,b)=>b.date-a.date);
  }

  function buildRows(entries, isFullDay) {
    const showAll = isFullDay || entries.length<=PREVIEW_ROWS;
    const visible = showAll ? entries : entries.slice(0,PREVIEW_ROWS);
    const hidden  = showAll ? [] : entries.slice(PREVIEW_ROWS);
    let rows='';
    visible.forEach((e,i)=>{
      const prev=entries[i+1]?.price??null;
      rows+=`<tr><td class="td-time">${fmtTime(e.time)}</td><td class="td-price">RM ${fmtPrice(e.price)}</td><td class="td-change">${badge(e.price,prev)}</td></tr>`;
    });
    if (hidden.length) {
      const uid='h'+Math.random().toString(36).slice(2,7);
      rows+=`<tr id="${uid}" style="display:none"><td colspan="3" style="padding:0"><table style="width:100%;border-collapse:collapse">`;
      hidden.forEach((e,i)=>{
        const prev=entries[PREVIEW_ROWS+i+1]?.price??null;
        rows+=`<tr><td class="td-time" style="padding:14px 16px;border-top:1px solid var(--border)">${fmtTime(e.time)}</td><td class="td-price" style="padding:14px 16px;border-top:1px solid var(--border)">RM ${fmtPrice(e.price)}</td><td class="td-change" style="padding:14px 16px;border-top:1px solid var(--border);text-align:right">${badge(e.price,prev)}</td></tr>`;
      });
      rows+=`</table></td></tr>`;
      rows+=`<tr class="expand-row"><td colspan="3"><button class="expand-btn" onclick="toggleRows('${uid}',this)">Show all ${hidden.length} entries</button></td></tr>`;
    }
    return rows;
  }

  function toggleRows(uid, btn) {
    const el=document.getElementById(uid);
    const open=el.style.display==='table-row';
    el.style.display=open?'none':'table-row';
    btn.textContent=open?btn.textContent.replace(/^â–²\s*/,''):'â–² '+btn.textContent;
  }

  function render(records) {
    if (!records.length) {
      document.getElementById('content').innerHTML='<div class="empty">No data found.</div>';
      return;
    }

    const allGroups=groupByDate(records);
    const cutoff=new Date(); cutoff.setDate(cutoff.getDate()-(MAX_DAYS-1)); cutoff.setHours(0,0,0,0);
    const groups=allGroups.filter(g=>g.date>=cutoff);
    let html='';

    groups.forEach((group,gi)=>{
      const today=isToday(group.date);
      const isYest=gi===1&&!today;
      const entries=group.entries;
      const latest=entries[0];
      const oldest=entries[entries.length-1];

      // â”€â”€ MODULE 3: Title + Hero (today only) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      if (today && gi===0) {
        const dayDiff=entries.length>1?latest.price-oldest.price:null;
        const dayPct=dayDiff!=null?((dayDiff/oldest.price)*100).toFixed(2):null;
        const high=Math.max(...entries.map(e=>e.price));
        const low=Math.min(...entries.map(e=>e.price));
        let cc='flat',cs='â€”',csub='first entry today';
        if (dayDiff!=null) {
          if(dayDiff>0)      {cc='up';  cs=`+RM ${fmtPrice(dayDiff)}`;           csub=`+${dayPct}% today`;}
          else if(dayDiff<0) {cc='down'; cs=`-RM ${fmtPrice(Math.abs(dayDiff))}`; csub=`${dayPct}% today`;}
          else               {cs='No change'; csub='flat today';}
        }
        const heroDate=group.date.toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'short',year:'numeric'});
        html+=`
        <div style="display:flex;justify-content:space-between;align-items:center;gap:0.6rem;margin-bottom:0.6rem">
          <div style="font-family:'Outfit',sans-serif;font-weight:800;font-size:2.2rem;color:#c8cdd6;line-height:1;text-transform:uppercase">SILVER</div>
          <div style="display:flex;align-items:center;gap:0.6rem">
            <span style="font-size:0.65rem;color:var(--muted);font-family:'JetBrains Mono',monospace" id="countdown-txt">Refresh in 180s</span>
            <div class="live-badge"><span class="live-dot"></span> Live</div>
          </div>
        </div>
        <div class="hero" style="margin-top:0.8rem">
          <div class="hero-top">
            <div>
              <div class="hero-date">${heroDate}</div>
              <div class="hero-label">Current Price</div>
              <div class="hero-price-wrap">
                <span class="hero-currency">RM</span>
                <span class="hero-price">${fmtPrice(latest.price)}</span>
                <span class="hero-unit">/100 g</span>
              </div>
            </div>
            <div class="hero-change-wrap">
              <div class="hero-change ${cc}">${cs}</div>
              <div class="hero-change-sub" style="color:${cc==='up'?'var(--up)':cc==='down'?'var(--down)':'var(--muted)'}">${csub}</div>
            </div>
          </div>
          <div class="hero-stats">
            <div class="stat"><div class="stat-label">Last Updated</div><div class="stat-val">${fmtTime(latest.time)}</div></div>
            <div class="stat"><div class="stat-label">Changes Today</div><div class="stat-val">${entries.length}</div></div>
            <div class="stat"><div class="stat-label">Day High</div><div class="stat-val up">RM ${fmtPrice(high)}</div></div>
            <div class="stat"><div class="stat-label">Day Low</div><div class="stat-val down">RM ${fmtPrice(low)}</div></div>
          </div>
        </div>
        <p style="font-size:0.72rem;color:var(--muted2);line-height:1.7;margin-bottom:2rem">All prices are based on <a href="https://publicgold.com.my/" target="_blank" rel="noopener" style="color:#c8cdd6;text-decoration:none;border-bottom:1px solid rgba(200,205,214,0.4)">Public Gold Malaysia SAP 999</a> rates and are subject to change. Prices updated every 3 minutes and recorded daily.</p>`;
      }

      // â”€â”€ MODULE 9: S2 Yesterday paragraph ABOVE yesterday table â”€â”€
      if (isYest) {
        const yFmt=group.date.toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});
        const yLast=entries[0];
        const yHigh=entries.reduce((a,b)=>a.price>b.price?a:b);
        const yLow =entries.reduce((a,b)=>a.price<b.price?a:b);
        html+=`
        <div class="seo-section" style="margin-bottom:1rem">
          <h2 class="seo-h2">Yesterday's Public Gold Silver Price â€” ${yFmt}</h2>
          <p class="seo-p">The last recorded Public Gold silver price yesterday was <strong>RM ${fmtPrice(yLast.price)}</strong> per gram. The highest price yesterday was recorded at <strong>${fmtTime(yHigh.time)}</strong> at <strong>RM ${fmtPrice(yHigh.price)}</strong> per gram, while the lowest was recorded at <strong>${fmtTime(yLow.time)}</strong> at <strong>RM ${fmtPrice(yLow.price)}</strong> per gram.</p>
        </div>`;
      }

      // â”€â”€ Price table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      const pillClass=today?'today':'past';
      const pillLabel=today?"Today's Price Records":(isYest?`YESTERDAY - ${fmtShort(group.date)}`:fmtShort(group.date));
      const isFullDay=today||isYest;

      html+=`
      <div class="date-section" style="animation-delay:${gi*0.05}s">
        <div class="date-row">
          <div class="date-pill ${pillClass}">${pillLabel}</div>
          <div class="date-line"></div>
          ${!today?`<span class="date-full">${fmtDate(group.date)}</span>`:''}
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Time</th><th>PRICE / 100 g</th><th class="right">Change</th></tr></thead>
            <tbody>${buildRows(entries,isFullDay)}</tbody>
          </table>
        </div>
      </div>`;

      // â”€â”€ After today table: S1 line 1 + S3 weekly card â”€â”€â”€â”€â”€â”€â”€â”€
      if (today && gi===0) {
        const todayFmt=group.date.toLocaleDateString('en-GB',{day:'numeric',month:'long',year:'numeric'});
        const diffToday=entries.length>1?latest.price-oldest.price:null;
        let moveWord='unchanged';
        if(diffToday!=null){if(diffToday>0)moveWord='up';else if(diffToday<0)moveWord='down';}

        // S1 â€” first line only
        html+=`
        <div class="seo-section" style="margin-top:2rem">
          <h2 class="seo-h2">Today's Public Gold Silver Price</h2>
          <p class="seo-p">${todayFmt} â€” The latest Public Gold silver price today is <strong>RM ${fmtPrice(latest.price)}</strong> per gram, recorded at <strong>${fmtTime(latest.time)}</strong>.${diffToday!=null&&diffToday!==0?` Price is ${moveWord} <strong>RM ${fmtPrice(Math.abs(diffToday))}</strong> compared to the first entry today (<strong>RM ${fmtPrice(oldest.price)}</strong>).`:''}</p>
        </div>`;

        // S3 â€” weekly summary card
        const now=new Date();
        const wStart=new Date(now); wStart.setDate(wStart.getDate()-6); wStart.setHours(0,0,0,0);
        const wRecs=records.filter(r=>r.date>=wStart);
        if(wRecs.length){
          const wHigh=Math.max(...wRecs.map(r=>r.price));
          const wLow =Math.min(...wRecs.map(r=>r.price));
          const wAvg =wRecs.reduce((s,r)=>s+r.price,0)/wRecs.length;
          const wSF  =wStart.toLocaleDateString('en-GB',{day:'numeric',month:'short'});
          const wEF  =now.toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'});
          html+=`
          <div class="seo-card">
            <div class="seo-card-header">
              <span class="seo-card-title">This Week's Public Gold Silver Price Summary</span>
              <span class="seo-card-date">${wSF} â€“ ${wEF}</span>
            </div>
            <div class="seo-card-stats">
              <div class="seo-stat"><div class="seo-stat-label">Week High</div><div class="seo-stat-val up">RM ${fmtPrice(wHigh)}</div></div>
              <div class="seo-stat"><div class="seo-stat-label">Week Low</div><div class="seo-stat-val down">RM ${fmtPrice(wLow)}</div></div>
              <div class="seo-stat"><div class="seo-stat-label">Week Avg</div><div class="seo-stat-val">RM ${fmtPrice(wAvg)}</div></div>
              <div class="seo-stat"><div class="seo-stat-label">Total Records</div><div class="seo-stat-val">${wRecs.length}</div></div>
            </div>
          </div>`;
        }
      }
    });

    document.getElementById('content').innerHTML=html;
    document.getElementById('last-updated').textContent=new Date().toLocaleTimeString('en-GB');
  }

  async function refresh() {
    countdown=REFRESH_MS/1000;
    try { render(await fetchData()); }
    catch(e) { console.error(e); document.getElementById('last-updated').textContent='Error â€” retryingâ€¦'; }
  }

  refresh();
  setInterval(refresh, REFRESH_MS);
</script>
</body>
</html>
